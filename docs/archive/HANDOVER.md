# Project Handover: Tab Groups & Windows List Extension

This document provides the complete context for an AI agent or developer to continue the development and maintenance of this Chrome Extension.

## 1. Project Overview
- **Goal**: A Chrome extension that provides a 3-level hierarchical view of browser state: **Window > Tab Group > Individual Tab**.
- **Current Version**: v1.2.0
- **Repository**: `https://github.com/thewoolleyman/tab-groups-windows-list`

## 2. Technical Stack
- **Frontend**: Vanilla JavaScript, HTML5, CSS3 (Manifest V3).
- **Unit Testing**: Jest (32 tests) for core logic and data mapping.
- **E2E Testing**: Playwright (26 tests) with mocked Chrome APIs for UI verification.
- **CI/CD**: GitHub Actions with a unified 4-stage pipeline.

## 3. CI/CD Pipeline Architecture
The pipeline is defined in `.github/workflows/ci-cd.yml` and consists of:
1. **Build**: Packages the extension into a ZIP and extracts the version.
2. **Test**: Runs Unit and E2E tests in parallel. E2E tests use `xvfb` for headful browser simulation.
3. **Release**: **Automatic**. Creates a GitHub Release and uploads the ZIP if the version in `manifest.json` is new.
4. **Publish**: **Manual Approval Required**. Uses the `production` environment. Once approved, it programmatically uploads to the Chrome Web Store.

### Required Secrets
To enable the **Publish** stage, the following GitHub Secrets must be set:
- `CHROME_CLIENT_ID`
- `CHROME_CLIENT_SECRET`
- `CHROME_REFRESH_TOKEN`
- `CHROME_PUBLISHER_ID`
*See `chrome-webstore-api-credentials.md` for setup instructions.*

## 4. Recent Implementation Details (TDD)
We recently fixed two major bugs using strict TDD (Kent Beck style):
- **Bug #1**: Tab titles were incorrectly showing window titles. Fixed and verified.
- **Bug #2**: Windows with no groups or mixed content were not showing all tabs.
- **Solution**: Introduced an `ungrouped-tab` class and updated the rendering logic in `popup.js` to ensure every tab is accounted for in the hierarchy.

## 5. Testing Methodology
- **E2E Tests**: Located in `tests/extension.e2e.spec.js`. They use a custom mocking system in `tests/fixtures.js` to simulate the `chrome.*` APIs.
- **Screenshots**: The E2E suite captures screenshots of various scenarios (fully expanded, mixed content, no groups) which are uploaded as CI artifacts.

## 6. Current State & Next Steps
- **Status**: All tests (58 total) are passing. The 3-level hierarchy is fully functional.
- **Next Steps**: 
  1. Configure the Chrome Web Store API secrets to enable automated publishing.
  2. Implement automatic version bumping (currently manual in `manifest.json`).
  3. Enhance UI/UX based on user feedback.

---
*Generated by Manus AI on Jan 21, 2026.*
